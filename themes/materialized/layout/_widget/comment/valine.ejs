<div class="vcomment"></div>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.slim.min.js"></script>
<script src="https://unpkg.com/leancloud-storage@4.12.2/dist/av-min.js"></script>
<script src="https://unpkg.com/valine@1.4.18/dist/Valine.min.js"></script>
<script>
  var GUEST_INFO = ['nick', 'mail', 'link'];
  var guest_info = '<%= theme.comment.valine_guest_info %>'.split(',').filter(function (item) {
    return GUEST_INFO.indexOf(item) > -1;
  });
  var notify = '<%= theme.comment.valine_notify %>' === 'true';
  var verify = '<%= theme.comment.valine_verify %>' === 'true';
  new Valine({
    av: AV,
    el: '.vcomment',
    notify: notify,
    verify: verify,
    appId: "<%= theme.comment.valine_leancloud_app_id %>",
    appKey: "<%= theme.comment.valine_leancloud_app_key %>",
    placeholder: "<%= theme.comment.valine_placeholder %>",
    pageSize: '<%= theme.comment.valine_page_size %>',
    avatar: '<%= theme.comment.valine_avatar %>',
    lang: '<%= theme.comment.valine_lang %>',
    guest_info: guest_info
  });
</script>
